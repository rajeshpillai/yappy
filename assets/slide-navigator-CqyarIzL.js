import{t as m,h as ee,i as v,x as Y,ax as te,f as A,P as ie,d as q,s as V,C as ne,aL as le,e as Z,m as ae,u as oe}from"./vendor-rendering-CqcgmY0d.js";import{l as G,o as J,h as c,a as $,e as C,d as se,F as re,S as z}from"./solid-framework-CtC0wtKI.js";import{s as k,E as j,H as de,ak as ce,al as ue,am as ve,an as ge,ao as X,ap as pe}from"./index-Dbu85wVc.js";import"./vendor-export-B6WwIQ1_.js";var fe=m('<div class=slide-transition-picker><div style=display:flex;justify-content:space-between;align-items:center><h4>Transition</h4><button class=close-picker-btn title=Close></button></div><div class=transition-field><label>Type</label><select><option value=none>None</option><option value=fade>Fade</option><option value=slide-left>Slide Left</option><option value=slide-right>Slide Right</option><option value=slide-up>Slide Up</option><option value=slide-down>Slide Down</option><option value=zoom-in>Zoom In</option><option value=zoom-out>Zoom Out</option></select></div><div class=transition-field><label>Duration (ms)</label><input type=number min=100 max=5000 step=100></div><div class=transition-field><label>Easing</label><select><option value=linear>Linear</option><option value=easeInQuad>Quad In</option><option value=easeOutQuad>Quad Out</option><option value=easeInOutQuad>Quad InOut</option><option value=easeInCubic>Cubic In</option><option value=easeOutCubic>Cubic Out</option><option value=easeInOutCubic>Cubic InOut</option><option value=easeOutBack>Back Out</option><option value=easeSpring>Spring</option></select></div><div class=transition-actions><button class=preview-btn title="Preview Transition">Preview');const $e=o=>{const S=()=>k.slides[o.index],p=()=>S()?.transition||{type:"none",duration:500,easing:"easeInOutQuad"},w=l=>{l.key==="Escape"&&(l.preventDefault(),o.onClose())};G(()=>{window.addEventListener("keydown",w)}),J(()=>{window.removeEventListener("keydown",w)});const N=l=>{const a=l.currentTarget.value;j(o.index,{type:a})},M=l=>{const a=parseInt(l.currentTarget.value,10);isNaN(a)||j(o.index,{duration:a})},_=l=>{const a=l.currentTarget.value;j(o.index,{easing:a})},I=async()=>{await de.previewTransition(o.index)};return c(ie,{get children(){var l=fe(),a=l.firstChild,y=a.firstChild,D=y.nextSibling,E=a.nextSibling,Q=E.firstChild,P=Q.nextSibling,T=E.nextSibling,B=T.firstChild,O=B.nextSibling,f=T.nextSibling,e=f.firstChild,i=e.nextSibling,s=f.nextSibling,x=s.firstChild,R=x.firstChild;return l.$$click=g=>g.stopPropagation(),ee(D,"click",o.onClose,!0),v(D,c(Y,{size:14})),P.addEventListener("change",N),O.$$input=M,i.addEventListener("change",_),x.$$click=I,v(x,c(te,{size:14,style:"margin-right: 4px;"}),R),$(g=>{var u=`${o.position.top}px`,n=`${o.position.left}px`;return u!==g.e&&A(l,"top",g.e=u),n!==g.t&&A(l,"left",g.t=n),g},{e:void 0,t:void 0}),$(()=>P.value=p().type),$(()=>O.value=p().duration),$(()=>i.value=p().easing),l}})};q(["click","input"]);var be=m("<div class=slide-context-menu><div class=menu-item>Insert Slide Above</div><div class=menu-item>Insert Slide Below"),he=m('<div class=slide-navigator id=slide-navigator><div class=slide-navigator-header>Slides</div><div class=slide-list-container></div><div class=add-slide-container><button class=add-slide-btn title="Add Slide (Ctrl+M)"><span class=icon>+ Add Slide'),me=m("<img class=slide-thumbnail-img>"),Se=m('<div><div class=slide-index></div><div><button class=slide-delete-btn title="Delete Slide"></button><button title="Slide Transition"></button><button class=slide-duplicate-btn title="Duplicate Slide"></button><div class=slide-preview>'),_e=m("<div class=slide-name-tag>");const Ie=()=>{let o;const[S,p]=C(null),[w,N]=C({top:0,left:0}),[M,_]=C(null),[I,l]=C(null),[a,y]=C(null);se(()=>{const e=k.activeSlideIndex;if(!o)return;o.children[e]?.scrollIntoView({block:"nearest",behavior:"smooth"})});const D=(e,i)=>{e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",i.toString()),l(i)},E=(e,i)=>{e.preventDefault(),e.dataTransfer.dropEffect="move",I()!==i&&_(i)},Q=(e,i)=>{e.preventDefault();const s=parseInt(e.dataTransfer.getData("text/plain"));_(null),!isNaN(s)&&s!==i&&pe(s,i)},P=()=>{_(null),l(null)},T=e=>{if(M()!==e)return"";const i=I();return i===null?"":i<e?"drag-over-bottom":"drag-over-top"},B=(e,i)=>{if(e.stopPropagation(),S()===i)p(null);else{const s=e.currentTarget.getBoundingClientRect();N({top:s.top,left:s.right+10}),p(i)}},O=(e,i)=>{e.preventDefault(),e.stopPropagation(),y({visible:!0,x:e.clientX,y:e.clientY,index:i})},f=()=>{y(null)};return G(()=>{document.addEventListener("click",f)}),J(()=>{document.removeEventListener("click",f)}),c(z,{get when(){return k.docType==="slides"},get children(){var e=he(),i=e.firstChild,s=i.nextSibling,x=s.nextSibling,R=x.firstChild;e.$$click=()=>p(null);var g=o;return typeof g=="function"?oe(g,s):o=s,v(s,c(re,{get each(){return k.slides},children:(u,n)=>(()=>{var r=Se(),d=r.firstChild,b=d.nextSibling,h=b.firstChild,L=h.nextSibling,F=L.nextSibling,W=F.nextSibling;return r.$$contextmenu=t=>O(t,n()),r.addEventListener("dragend",P),r.addEventListener("drop",t=>Q(t,n())),r.addEventListener("dragover",t=>E(t,n())),r.addEventListener("dragstart",t=>D(t,n())),V(r,"draggable",!0),v(d,()=>n()+1),b.$$click=()=>ce(n()),h.$$click=t=>{t.stopPropagation(),confirm(`Delete Slide ${n()+1}?`)&&ue(n())},v(h,c(Y,{size:14})),L.$$click=t=>B(t,n()),v(L,c(ne,{size:14})),F.$$click=t=>{t.stopPropagation(),ve(n())},v(F,c(le,{size:14})),v(W,c(z,{get when(){return u.thumbnail},get fallback(){return(()=>{var t=_e();return v(t,()=>u.name||`Slide ${n()+1}`),t})()},get children(){var t=me();return $(()=>V(t,"src",u.thumbnail)),t}})),v(r,c(z,{get when(){return S()===n()},get children(){return c($e,{get index(){return n()},onClose:()=>p(null),get position(){return w()}})}}),null),$(t=>{var H=`slide-thumbnail-wrapper ${T(n())}`,K=`slide-thumbnail ${k.activeSlideIndex===n()?"active":""}`,U=`transition-toggle-btn ${S()===n()?"active":""}`;return H!==t.e&&Z(r,t.e=H),K!==t.t&&Z(b,t.t=K),U!==t.a&&Z(L,t.a=U),t},{e:void 0,t:void 0,a:void 0}),r})()})),R.$$click=()=>ge(),v(e,c(z,{get when(){return ae(()=>!!a())()&&a().visible},get children(){var u=be(),n=u.firstChild,r=n.nextSibling;return n.$$click=d=>{console.log("Insert Above clicked"),d.stopPropagation(),X(a().index,"before"),f()},r.$$click=d=>{console.log("Insert Below clicked"),d.stopPropagation(),X(a().index,"after"),f()},$(d=>{var b=`${a().y}px`,h=`${a().x}px`;return b!==d.e&&A(u,"top",d.e=b),h!==d.t&&A(u,"left",d.t=h),d},{e:void 0,t:void 0}),u}}),null),e}})};q(["click","contextmenu"]);export{Ie as SlideNavigator};
