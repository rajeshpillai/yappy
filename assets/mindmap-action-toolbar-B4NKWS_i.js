import{t as p,u as C,i as s,aC as L,Q as O,b1 as M,aU as E,aV as I,aW as A,az as T,m as P,k as H,aH as N,s as R,f as x,e as W,d as Y}from"./vendor-rendering-DL4SfLBt.js";import{e as B,b as S,h as n,S as $,d as V,a as k}from"./solid-framework-CtC0wtKI.js";import{s as i,ag as X,l as q,n as D,q as w,o as Q,p as U,ah as z,ai as j}from"./index-Dtkvs4TE.js";import"./vendor-export-B6WwIQ1_.js";var F=p('<button class=toolbar-btn title="Add Sibling (Enter)">'),G=p('<div class=layout-dropdown><button class=layout-btn title="Horizontal Right"></button><button class=layout-btn title="Vertical Down"></button><button class=layout-btn title=Radial>'),J=p("<div class=toolbar-divider>"),K=p("<button class=toolbar-btn>"),Z=p('<div class=mindmap-action-toolbar><div class=toolbar-content><button class=toolbar-btn title="Add Child (Tab)"></button><div class=toolbar-divider></div><button title="Auto Layout"></button><button class=toolbar-btn title="Auto Style Branch"></button><div class=toolbar-divider>');const lt=()=>{const[l,v]=B(!1),d=()=>i.selection.length!==1?null:i.elements.find(t=>t.id===i.selection[0]),e=()=>{const t=d();return t?i.elements.some(r=>r.parentId===t.id):!1},y=S(()=>{const t=d();return!(!t||["line","arrow","image","fineliner","inkbrush","marker","bezier"].includes(t.type))}),_=S(()=>{const t=d();return!t||!i.globalSettings.showMindmapToolbar||X(t.id)?!1:y()});return n($,{get when(){return _()},get children(){return n(tt,{hasChildren:e,isLayoutOpen:l,setIsLayoutOpen:v})}})},tt=l=>{const v=S(()=>i.selection.length!==1?null:i.elements.find(e=>e.id===i.selection[0]));let d;return V(()=>{l.isLayoutOpen()&&d&&j(d,()=>()=>l.setIsLayoutOpen(!1))}),n($,{get when(){return v()},children:e=>{const y=()=>{const t=z(e().id),r=t?t.x:e().x,b=t?t.width:e().width,f=(r+b/2)*i.viewState.scale+i.viewState.panX-90;if(i.showPropertyPanel&&!i.isPropertyPanelMinimized){const o=window.innerWidth-280,u=200,m=20;if(f+u>o-m)return o-u-m}return f},_=()=>{const t=z(e().id),o=(t?t.y:e().y)*i.viewState.scale+i.viewState.panY-50-20;return Math.max(o,60)};return(()=>{var t=Z(),r=t.firstChild,b=r.firstChild,f=b.nextSibling,o=f.nextSibling,u=o.nextSibling;u.nextSibling;var m=d;return typeof m=="function"?C(m,t):d=t,b.$$click=()=>q(e().id),s(b,n(L,{size:18})),s(r,n($,{get when(){return e().parentId},get children(){var a=F();return a.$$click=()=>D(e().id),s(a,n(O,{size:18})),a}}),f),o.$$click=()=>l.setIsLayoutOpen(!l.isLayoutOpen()),s(o,n(M,{size:18})),s(r,n($,{get when(){return l.isLayoutOpen()},get children(){var a=G(),c=a.firstChild,h=c.nextSibling,g=h.nextSibling;return c.$$click=()=>{w(e().id,"horizontal-right"),l.setIsLayoutOpen(!1)},s(c,n(E,{size:16})),h.$$click=()=>{w(e().id,"vertical-down"),l.setIsLayoutOpen(!1)},s(h,n(I,{size:16})),g.$$click=()=>{w(e().id,"radial"),l.setIsLayoutOpen(!1)},s(g,n(A,{size:16})),a}}),u),u.$$click=()=>Q(e().id),s(u,n(T,{size:18})),s(r,n($,{get when(){return l.hasChildren()},get children(){return[J(),(()=>{var a=K();return a.$$click=()=>U(e().id),s(a,(()=>{var c=P(()=>!!e().isCollapsed);return()=>c()?n(H,{size:18}):n(N,{size:18})})()),k(()=>R(a,"title",e().isCollapsed?"Expand":"Collapse")),a})()]}}),null),k(a=>{var c=`${Math.round(_())}px`,h=`${Math.round(y())}px`,g=`toolbar-btn ${l.isLayoutOpen()?"active":""}`;return c!==a.e&&x(t,"top",a.e=c),h!==a.t&&x(t,"left",a.t=h),g!==a.a&&W(o,a.a=g),a},{e:void 0,t:void 0,a:void 0}),t})()}})};Y(["click"]);export{lt as MindmapActionToolbar};
