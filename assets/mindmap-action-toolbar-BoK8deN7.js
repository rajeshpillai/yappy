import{t as $,u as C,i as s,aC as L,Q as O,b2 as M,aV as E,aW as I,aX as A,az as T,m as P,k as H,aH as N,s as R,f as x,e as W,d as X}from"./vendor-rendering-Ce4nhJhy.js";import{e as Y,b as S,h as n,S as v,d as B,a as k}from"./solid-framework-CtC0wtKI.js";import{s as i,ah as V,n as j,o as q,v as w,p as D,q as Q,ai as z,aj as F}from"./index-BdWE92BV.js";import"./vendor-export-B6WwIQ1_.js";var G=$('<button class=toolbar-btn title="Add Sibling (Enter)">'),J=$('<div class=layout-dropdown><button class=layout-btn title="Horizontal Right"></button><button class=layout-btn title="Vertical Down"></button><button class=layout-btn title=Radial>'),K=$("<div class=toolbar-divider>"),U=$("<button class=toolbar-btn>"),Z=$('<div class=mindmap-action-toolbar><div class=toolbar-content><button class=toolbar-btn title="Add Child (Tab)"></button><div class=toolbar-divider></div><button title="Auto Layout"></button><button class=toolbar-btn title="Auto Style Branch"></button><div class=toolbar-divider>');const lt=()=>{const[l,p]=Y(!1),d=()=>i.selection.length!==1?null:i.elements.find(t=>t.id===i.selection[0]),e=()=>{const t=d();return t?i.elements.some(r=>r.parentId===t.id):!1},y=S(()=>{const t=d();return!(!t||["line","arrow","image","fineliner","inkbrush","marker","bezier"].includes(t.type))}),_=S(()=>{const t=d();return!t||!i.globalSettings.showMindmapToolbar||V(t.id)?!1:y()});return n(v,{get when(){return _()},get children(){return n(tt,{hasChildren:e,isLayoutOpen:l,setIsLayoutOpen:p})}})},tt=l=>{const p=S(()=>i.selection.length!==1?null:i.elements.find(e=>e.id===i.selection[0]));let d;return B(()=>{l.isLayoutOpen()&&d&&F(d,()=>()=>l.setIsLayoutOpen(!1))}),n(v,{get when(){return p()},children:e=>{const y=()=>{const t=z(e().id),r=t?t.x:e().x,b=t?t.width:e().width,f=(r+b/2)*i.viewState.scale+i.viewState.panX-90;if(i.showPropertyPanel&&!i.isPropertyPanelMinimized){const o=window.innerWidth-280,u=200,m=20;if(f+u>o-m)return o-u-m}return f},_=()=>{const t=z(e().id),o=(t?t.y:e().y)*i.viewState.scale+i.viewState.panY-50-20;return Math.max(o,60)};return(()=>{var t=Z(),r=t.firstChild,b=r.firstChild,f=b.nextSibling,o=f.nextSibling,u=o.nextSibling;u.nextSibling;var m=d;return typeof m=="function"?C(m,t):d=t,b.$$click=()=>j(e().id),s(b,n(L,{size:18})),s(r,n(v,{get when(){return e().parentId},get children(){var a=G();return a.$$click=()=>q(e().id),s(a,n(O,{size:18})),a}}),f),o.$$click=()=>l.setIsLayoutOpen(!l.isLayoutOpen()),s(o,n(M,{size:18})),s(r,n(v,{get when(){return l.isLayoutOpen()},get children(){var a=J(),c=a.firstChild,h=c.nextSibling,g=h.nextSibling;return c.$$click=()=>{w(e().id,"horizontal-right"),l.setIsLayoutOpen(!1)},s(c,n(E,{size:16})),h.$$click=()=>{w(e().id,"vertical-down"),l.setIsLayoutOpen(!1)},s(h,n(I,{size:16})),g.$$click=()=>{w(e().id,"radial"),l.setIsLayoutOpen(!1)},s(g,n(A,{size:16})),a}}),u),u.$$click=()=>D(e().id),s(u,n(T,{size:18})),s(r,n(v,{get when(){return l.hasChildren()},get children(){return[K(),(()=>{var a=U();return a.$$click=()=>Q(e().id),s(a,(()=>{var c=P(()=>!!e().isCollapsed);return()=>c()?n(H,{size:18}):n(N,{size:18})})()),k(()=>R(a,"title",e().isCollapsed?"Expand":"Collapse")),a})()]}}),null),k(a=>{var c=`${Math.round(_())}px`,h=`${Math.round(y())}px`,g=`toolbar-btn ${l.isLayoutOpen()?"active":""}`;return c!==a.e&&x(t,"top",a.e=c),h!==a.t&&x(t,"left",a.t=h),g!==a.a&&W(o,a.a=g),a},{e:void 0,t:void 0,a:void 0}),t})()}})};X(["click"]);export{lt as MindmapActionToolbar};
