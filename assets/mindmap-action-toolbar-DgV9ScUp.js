import{t as p,u as L,i as o,aA as z,Q as O,a$ as E,aS as M,aT as A,aU as I,aR as T,m as P,k as R,aF as N,s as H,f as k,e as W,d as Y}from"./vendor-rendering-zBFezltB.js";import{o as B,e as X,b as S,h as a,S as v,d as j,a as x}from"./solid-framework-CtC0wtKI.js";import{s as l,ae as D,j as F,k as Q,o as w,l as U,n as V,af as C}from"./index-BgBzBPE6.js";import"./vendor-export-B6WwIQ1_.js";function q(i,h){const s=e=>{i.contains(e.target)||h()?.()};document.body.addEventListener("click",s),B(()=>{document.body.removeEventListener("click",s)})}var G=p('<button class=toolbar-btn title="Add Sibling (Enter)">'),J=p('<div class=layout-dropdown><button class=layout-btn title="Horizontal Right"></button><button class=layout-btn title="Vertical Down"></button><button class=layout-btn title=Radial>'),K=p("<div class=toolbar-divider>"),Z=p("<button class=toolbar-btn>"),tt=p('<div class=mindmap-action-toolbar><div class=toolbar-content><button class=toolbar-btn title="Add Child (Tab)"></button><div class=toolbar-divider></div><button title="Auto Layout"></button><button class=toolbar-btn title="Auto Style Branch">');const st=()=>{const[i,h]=X(!1),s=()=>l.selection.length!==1?null:l.elements.find(t=>t.id===l.selection[0]),e=()=>{const t=s();return t?l.elements.some(r=>r.parentId===t.id):!1},y=S(()=>{const t=s();return!(!t||["line","arrow","image","fineliner","inkbrush","marker","bezier"].includes(t.type))}),_=S(()=>{const t=s();return!t||!l.globalSettings.showMindmapToolbar||D(t.id)?!1:y()});return a(v,{get when(){return _()},get children(){return a(et,{hasChildren:e,isLayoutOpen:i,setIsLayoutOpen:h})}})},et=i=>{const h=S(()=>l.selection.length!==1?null:l.elements.find(e=>e.id===l.selection[0]));let s;return j(()=>{i.isLayoutOpen()&&s&&q(s,()=>()=>i.setIsLayoutOpen(!1))}),a(v,{get when(){return h()},children:e=>{const y=()=>{const t=C(e().id),r=t?t.x:e().x,u=t?t.width:e().width,b=(r+u/2)*l.viewState.scale+l.viewState.panX-90;if(l.showPropertyPanel&&!l.isPropertyPanelMinimized){const d=window.innerWidth-280,f=200,g=20;if(b+f>d-g)return d-f-g}return b},_=()=>{const t=C(e().id),d=(t?t.y:e().y)*l.viewState.scale+l.viewState.panY-50-20;return Math.max(d,60)};return(()=>{var t=tt(),r=t.firstChild,u=r.firstChild,b=u.nextSibling,d=b.nextSibling,f=d.nextSibling,g=s;return typeof g=="function"?L(g,t):s=t,u.$$click=()=>F(e().id),o(u,a(z,{size:18})),o(r,a(v,{get when(){return e().parentId},get children(){var n=G();return n.$$click=()=>Q(e().id),o(n,a(O,{size:18})),n}}),b),d.$$click=()=>i.setIsLayoutOpen(!i.isLayoutOpen()),o(d,a(E,{size:18})),o(r,a(v,{get when(){return i.isLayoutOpen()},get children(){var n=J(),c=n.firstChild,m=c.nextSibling,$=m.nextSibling;return c.$$click=()=>{w(e().id,"horizontal-right"),i.setIsLayoutOpen(!1)},o(c,a(M,{size:16})),m.$$click=()=>{w(e().id,"vertical-down"),i.setIsLayoutOpen(!1)},o(m,a(A,{size:16})),$.$$click=()=>{w(e().id,"radial"),i.setIsLayoutOpen(!1)},o($,a(I,{size:16})),n}}),f),f.$$click=()=>U(e().id),o(f,a(T,{size:18})),o(r,a(v,{get when(){return i.hasChildren()},get children(){return[K(),(()=>{var n=Z();return n.$$click=()=>V(e().id),o(n,(()=>{var c=P(()=>!!e().isCollapsed);return()=>c()?a(R,{size:18}):a(N,{size:18})})()),x(()=>H(n,"title",e().isCollapsed?"Expand":"Collapse")),n})()]}}),null),x(n=>{var c=`${Math.round(_())}px`,m=`${Math.round(y())}px`,$=`toolbar-btn ${i.isLayoutOpen()?"active":""}`;return c!==n.e&&k(t,"top",n.e=c),m!==n.t&&k(t,"left",n.t=m),$!==n.a&&W(d,n.a=$),n},{e:void 0,t:void 0,a:void 0}),t})()}})};Y(["click"]);export{st as MindmapActionToolbar};
