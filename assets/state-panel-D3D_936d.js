import{t as d,i as a,b1 as K,x as F,b2 as Q,aw as V,ax as W,b3 as Z,ay as tt,e as et,f as at,d as st}from"./vendor-rendering-CqcgmY0d.js";import{e as o,l as lt,h as s,S as _,a as g,F as nt,o as it}from"./solid-framework-CtC0wtKI.js";import{s as l,ac as rt,ad as c,ae as ot,af as ct,ag as T}from"./index-BabBlxU5.js";import"./vendor-export-B6WwIQ1_.js";var dt=d('<button class="icon-btn play-all-btn"title="Play All States">'),ut=d("<div class=empty-state>No states saved yet. Capture the current canvas to start!"),pt=d('<div class=state-panel><div class=panel-header><h3>Display States</h3><div style=display:flex;gap:4px><button class="icon-btn reset-btn"title="Reset to Start"></button><button class=close-btn></button></div></div><div class=panel-actions><div class=input-group><input type=text placeholder="State name..."><button class=add-btn title="Capture Current State"><span>Capture</span></button></div></div><div class=state-list>'),$t=d('<button class="icon-btn play-all-btn"title="Stop Playback">'),gt=d('<div><div class=state-info><span class=state-name></span><span class=state-count> elements</span></div><div class=state-controls><button class=icon-btn title="Morph to State"></button><button class=icon-btn title="Update State with Current"></button><button class="icon-btn delete"title="Delete State">');const mt=()=>{const[b,S]=o(""),[u,U]=o({x:0,y:0}),[w,x]=o(!1),[k,X]=o({x:0,y:0}),[f,h]=o(!1),C=()=>{b().trim()?(T(b().trim()),S("")):T(`State ${l.states.length+1}`)},P=()=>{l.states.length>0&&c(l.states[0].id)},Y=async()=>{if(!(l.states.length===0||f())){h(!0),await c(l.states[0].id);for(let e=1;e<l.states.length&&f();e++)await new Promise(n=>setTimeout(n,1500)),await c(l.states[e].id);h(!1)}},j=()=>{h(!1)},O=e=>{!e.target.closest(".panel-header")||e.target.closest(".close-btn")||e.target.closest(".reset-btn")||e.target.closest(".play-all-btn")||(x(!0),X({x:e.clientX-u().x,y:e.clientY-u().y}),e.preventDefault())},D=e=>{w()&&U({x:e.clientX-k().x,y:e.clientY-k().y})},z=()=>{x(!1)};return lt(()=>{window.addEventListener("mousemove",D),window.addEventListener("mouseup",z),it(()=>{window.removeEventListener("mousemove",D),window.removeEventListener("mouseup",z)})}),s(_,{get when(){return l.showStatePanel},get children(){var e=pt(),n=e.firstChild,q=n.firstChild,E=q.nextSibling,p=E.firstChild,M=p.nextSibling,L=n.nextSibling,B=L.firstChild,$=B.firstChild,v=$.nextSibling,G=v.firstChild,N=L.nextSibling;return n.$$dblclick=P,n.$$mousedown=O,a(E,s(_,{get when(){return!f()},get fallback(){return(()=>{var t=$t();return t.$$click=j,a(t,s(F,{size:18})),t})()},get children(){var t=dt();return t.$$click=Y,a(t,s(K,{size:18})),g(()=>t.disabled=l.states.length===0),t}}),p),p.$$click=P,a(p,s(Q,{size:18})),M.$$click=()=>rt(!1),a(M,s(F,{size:18})),$.$$keydown=t=>t.key==="Enter"&&C(),$.$$input=t=>S(t.currentTarget.value),v.$$click=C,a(v,s(V,{size:18}),G),a(N,s(nt,{get each(){return l.states},children:t=>(()=>{var i=gt(),r=i.firstChild,A=r.firstChild,I=A.nextSibling,H=I.firstChild,J=r.nextSibling,m=J.firstChild,y=m.nextSibling,R=y.nextSibling;return r.$$click=()=>c(t.id),a(A,()=>t.name),a(I,()=>Object.keys(t.overrides).length,H),m.$$click=()=>c(t.id),a(m,s(W,{size:16,fill:"currentColor"})),y.$$click=()=>ot(t.id),a(y,s(Z,{size:16})),R.$$click=()=>ct(t.id),a(R,s(tt,{size:16})),g(()=>et(i,`state-item ${l.activeStateId===t.id?"active":""}`)),i})()}),null),a(N,s(_,{get when(){return l.states.length===0},get children(){return ut()}}),null),g(t=>{var i=!!w(),r=`translate(${u().x}px, ${u().y}px)`;return i!==t.e&&e.classList.toggle("dragging",t.e=i),r!==t.t&&at(e,"transform",t.t=r),t},{e:void 0,t:void 0}),g(()=>$.value=b()),e}})};st(["mousedown","dblclick","click","input","keydown"]);export{mt as StatePanel};
