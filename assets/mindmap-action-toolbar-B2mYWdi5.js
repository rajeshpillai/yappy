import{t as $,u as L,i as o,aB as z,Q as O,b1 as E,aU as M,aV as I,aW as T,aT as A,m as P,k as N,aG as R,s as W,f as k,e as B,d as H}from"./vendor-rendering-DUEULMQ4.js";import{o as Y,e as V,b as S,h as a,S as v,d as X,a as x}from"./solid-framework-CtC0wtKI.js";import{s as l,ag as q,l as D,n as G,q as w,o as Q,p as U,ah as C}from"./index-DuhWrASm.js";import"./vendor-export-B6WwIQ1_.js";function j(i,m){const s=e=>{i.contains(e.target)||m()?.()};document.body.addEventListener("click",s),Y(()=>{document.body.removeEventListener("click",s)})}var F=$('<button class=toolbar-btn title="Add Sibling (Enter)">'),J=$('<div class=layout-dropdown><button class=layout-btn title="Horizontal Right"></button><button class=layout-btn title="Vertical Down"></button><button class=layout-btn title=Radial>'),K=$("<div class=toolbar-divider>"),Z=$("<button class=toolbar-btn>"),tt=$('<div class=mindmap-action-toolbar><div class=toolbar-content><button class=toolbar-btn title="Add Child (Tab)"></button><div class=toolbar-divider></div><button title="Auto Layout"></button><button class=toolbar-btn title="Auto Style Branch">');const st=()=>{const[i,m]=V(!1),s=()=>l.selection.length!==1?null:l.elements.find(t=>t.id===l.selection[0]),e=()=>{const t=s();return t?l.elements.some(r=>r.parentId===t.id):!1},y=S(()=>{const t=s();return!(!t||["line","arrow","image","fineliner","inkbrush","marker","bezier"].includes(t.type))}),_=S(()=>{const t=s();return!t||!l.globalSettings.showMindmapToolbar||q(t.id)?!1:y()});return a(v,{get when(){return _()},get children(){return a(et,{hasChildren:e,isLayoutOpen:i,setIsLayoutOpen:m})}})},et=i=>{const m=S(()=>l.selection.length!==1?null:l.elements.find(e=>e.id===l.selection[0]));let s;return X(()=>{i.isLayoutOpen()&&s&&j(s,()=>()=>i.setIsLayoutOpen(!1))}),a(v,{get when(){return m()},children:e=>{const y=()=>{const t=C(e().id),r=t?t.x:e().x,u=t?t.width:e().width,b=(r+u/2)*l.viewState.scale+l.viewState.panX-90;if(l.showPropertyPanel&&!l.isPropertyPanelMinimized){const d=window.innerWidth-280,f=200,g=20;if(b+f>d-g)return d-f-g}return b},_=()=>{const t=C(e().id),d=(t?t.y:e().y)*l.viewState.scale+l.viewState.panY-50-20;return Math.max(d,60)};return(()=>{var t=tt(),r=t.firstChild,u=r.firstChild,b=u.nextSibling,d=b.nextSibling,f=d.nextSibling,g=s;return typeof g=="function"?L(g,t):s=t,u.$$click=()=>D(e().id),o(u,a(z,{size:18})),o(r,a(v,{get when(){return e().parentId},get children(){var n=F();return n.$$click=()=>G(e().id),o(n,a(O,{size:18})),n}}),b),d.$$click=()=>i.setIsLayoutOpen(!i.isLayoutOpen()),o(d,a(E,{size:18})),o(r,a(v,{get when(){return i.isLayoutOpen()},get children(){var n=J(),c=n.firstChild,h=c.nextSibling,p=h.nextSibling;return c.$$click=()=>{w(e().id,"horizontal-right"),i.setIsLayoutOpen(!1)},o(c,a(M,{size:16})),h.$$click=()=>{w(e().id,"vertical-down"),i.setIsLayoutOpen(!1)},o(h,a(I,{size:16})),p.$$click=()=>{w(e().id,"radial"),i.setIsLayoutOpen(!1)},o(p,a(T,{size:16})),n}}),f),f.$$click=()=>Q(e().id),o(f,a(A,{size:18})),o(r,a(v,{get when(){return i.hasChildren()},get children(){return[K(),(()=>{var n=Z();return n.$$click=()=>U(e().id),o(n,(()=>{var c=P(()=>!!e().isCollapsed);return()=>c()?a(N,{size:18}):a(R,{size:18})})()),x(()=>W(n,"title",e().isCollapsed?"Expand":"Collapse")),n})()]}}),null),x(n=>{var c=`${Math.round(_())}px`,h=`${Math.round(y())}px`,p=`toolbar-btn ${i.isLayoutOpen()?"active":""}`;return c!==n.e&&k(t,"top",n.e=c),h!==n.t&&k(t,"left",n.t=h),p!==n.a&&B(d,n.a=p),n},{e:void 0,t:void 0,a:void 0}),t})()}})};H(["click"]);export{st as MindmapActionToolbar};
