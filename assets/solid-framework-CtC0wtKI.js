const a={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return ae(this.context.count)},getNextContextId(){return ae(this.context.count++)}};function ae(e){const t=String(e),r=t.length-1;return a.context.id+(r?String.fromCharCode(96+r):"")+t}function D(e){a.context=e}const he=!1,Se=(e,t)=>e===t,W=Symbol("solid-proxy"),ge=typeof Proxy=="function",pe=Symbol("solid-track"),X={equals:Se};let be=ve;const T=1,Y=2,we={owned:null,cleanups:null,context:null,owner:null},ne={};var h=null;let H=null,Oe=null,g=null,k=null,I=null,Q=0;function R(e,t){const r=g,n=h,s=e.length===0,l=t===void 0?n:t,u=s?we:{owned:null,cleanups:null,context:l?l.context:null,owner:l},i=s?e:()=>e(()=>j(()=>_(u)));h=u,g=null;try{return $(i,!0)}finally{g=r,h=n}}function L(e,t){t=t?Object.assign({},X,t):X;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},n=s=>(typeof s=="function"&&(s=s(r.value)),xe(r,s));return[me.bind(r),n]}function de(e,t,r){const n=J(e,t,!0,T);V(n)}function Ce(e,t,r){const n=J(e,t,!1,T);V(n)}function Ae(e,t,r){be=Te;const n=J(e,t,!1,T),s=U&&oe(U);s&&(n.suspense=s),(!r||!r.render)&&(n.user=!0),I?I.push(n):V(n)}function A(e,t,r){r=r?Object.assign({},X,r):X;const n=J(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=r.equals||void 0,V(n),me.bind(n)}function Pe(e){return e&&typeof e=="object"&&"then"in e}function Ee(e,t,r){let n,s,l;n=!0,s=e,l={};let u=null,i=ne,o=null,d=!1,c="initialValue"in l,f=typeof n=="function"&&A(n);const y=new Set,[p,x]=(l.storage||L)(l.initialValue),[m,F]=L(void 0),[P,v]=L(void 0,{equals:!1}),[S,E]=L(c?"ready":"unresolved");a.context&&(o=a.getNextContextId(),l.ssrLoadFrom==="initial"?i=l.initialValue:a.load&&a.has(o)&&(i=a.load(o)));function C(b,w,N,O){return u===b&&(u=null,O!==void 0&&(c=!0),(b===i||w===i)&&l.onHydrated&&queueMicrotask(()=>l.onHydrated(O,{value:w})),i=ne,Z(w,N)),w}function Z(b,w){$(()=>{w===void 0&&x(()=>b),E(w!==void 0?"errored":c?"ready":"unresolved"),F(w);for(const N of y.keys())N.decrement();y.clear()},!1)}function ee(){const b=U&&oe(U),w=p(),N=m();if(N!==void 0&&!u)throw N;return g&&!g.user&&b&&de(()=>{P(),u&&(b.resolved&&H||y.has(b)||(b.increment(),y.add(b)))}),w}function te(b=!0){if(b!==!1&&d)return;d=!1;const w=f?f():n;if(w==null||w===!1){C(u,j(p));return}let N;const O=i!==ne?i:j(()=>{try{return s(w,{value:p(),refetching:b})}catch(M){N=M}});if(N!==void 0){C(u,void 0,q(N),w);return}else if(!Pe(O))return C(u,O,void 0,w),O;return u=O,"v"in O?(O.s===1?C(u,O.v,void 0,w):C(u,void 0,q(O.v),w),O):(d=!0,queueMicrotask(()=>d=!1),$(()=>{E(c?"refreshing":"pending"),v()},!1),O.then(M=>C(O,M,void 0,w),M=>C(O,void 0,q(M),w)))}Object.defineProperties(ee,{state:{get:()=>S()},error:{get:()=>m()},loading:{get(){const b=S();return b==="pending"||b==="refreshing"}},latest:{get(){if(!c)return ee();const b=m();if(b&&!u)throw b;return p()}}});let ce=h;return f?de(()=>(ce=h,te(!1))):te(!1),[ee,{refetch:b=>Ie(ce,()=>te(b)),mutate:x}]}function qe(e){return $(e,!1)}function j(e){if(g===null)return e();const t=g;g=null;try{return e()}finally{g=t}}function We(e){Ae(()=>j(e))}function ie(e){return h===null||(h.cleanups===null?h.cleanups=[e]:h.cleanups.push(e)),e}function Xe(){return g}function je(){return h}function Ie(e,t){const r=h,n=g;h=e,g=null;try{return $(t,!0)}catch(s){fe(s)}finally{h=r,g=n}}const[Ye,ze]=L(!1);function Fe(e){I.push.apply(I,e),e.length=0}function ye(e,t){const r=Symbol("context");return{id:r,Provider:Re(r),defaultValue:e}}function oe(e){let t;return h&&h.context&&(t=h.context[e.id])!==void 0?t:e.defaultValue}function Ne(e){const t=A(e),r=A(()=>se(t()));return r.toArray=()=>{const n=r();return Array.isArray(n)?n:n!=null?[n]:[]},r}let U;function Le(){return U||(U=ye())}function me(){if(this.sources&&this.state)if(this.state===T)V(this);else{const e=k;k=null,$(()=>B(this),!1),k=e}if(g){const e=this.observers?this.observers.length:0;g.sources?(g.sources.push(this),g.sourceSlots.push(e)):(g.sources=[this],g.sourceSlots=[e]),this.observers?(this.observers.push(g),this.observerSlots.push(g.sources.length-1)):(this.observers=[g],this.observerSlots=[g.sources.length-1])}return this.value}function xe(e,t,r){let n=e.value;return(!e.comparator||!e.comparator(n,t))&&(e.value=t,e.observers&&e.observers.length&&$(()=>{for(let s=0;s<e.observers.length;s+=1){const l=e.observers[s],u=H&&H.running;u&&H.disposed.has(l),(u?!l.tState:!l.state)&&(l.pure?k.push(l):I.push(l),l.observers&&ke(l)),u||(l.state=T)}if(k.length>1e6)throw k=[],new Error},!1)),t}function V(e){if(!e.fn)return;_(e);const t=Q;De(e,e.value,t)}function De(e,t,r){let n;const s=h,l=g;g=h=e;try{n=e.fn(t)}catch(u){return e.pure&&(e.state=T,e.owned&&e.owned.forEach(_),e.owned=null),e.updatedAt=r+1,fe(u)}finally{g=l,h=s}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?xe(e,n):e.value=n,e.updatedAt=r)}function J(e,t,r,n=T,s){const l={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:h,context:h?h.context:null,pure:r};return h===null||h!==we&&(h.owned?h.owned.push(l):h.owned=[l]),l}function z(e){if(e.state===0)return;if(e.state===Y)return B(e);if(e.suspense&&j(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Q);)e.state&&t.push(e);for(let r=t.length-1;r>=0;r--)if(e=t[r],e.state===T)V(e);else if(e.state===Y){const n=k;k=null,$(()=>B(e,t[0]),!1),k=n}}function $(e,t){if(k)return e();let r=!1;t||(k=[]),I?r=!0:I=[],Q++;try{const n=e();return $e(r),n}catch(n){r||(I=null),k=null,fe(n)}}function $e(e){if(k&&(ve(k),k=null),e)return;const t=I;I=null,t.length&&$(()=>be(t),!1)}function ve(e){for(let t=0;t<e.length;t++)z(e[t])}function Te(e){let t,r=0;for(t=0;t<e.length;t++){const n=e[t];n.user?e[r++]=n:z(n)}if(a.context){if(a.count){a.effects||(a.effects=[]),a.effects.push(...e.slice(0,r));return}D()}for(a.effects&&(a.done||!a.count)&&(e=[...a.effects,...e],r+=a.effects.length,delete a.effects),t=0;t<r;t++)z(e[t])}function B(e,t){e.state=0;for(let r=0;r<e.sources.length;r+=1){const n=e.sources[r];if(n.sources){const s=n.state;s===T?n!==t&&(!n.updatedAt||n.updatedAt<Q)&&z(n):s===Y&&B(n,t)}}}function ke(e){for(let t=0;t<e.observers.length;t+=1){const r=e.observers[t];r.state||(r.state=Y,r.pure?k.push(r):I.push(r),r.observers&&ke(r))}}function _(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),n=e.sourceSlots.pop(),s=r.observers;if(s&&s.length){const l=s.pop(),u=r.observerSlots.pop();n<s.length&&(l.sourceSlots[u]=n,s[n]=l,r.observerSlots[n]=u)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)_(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)_(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function q(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function fe(e,t=h){throw q(e)}function se(e){if(typeof e=="function"&&!e.length)return se(e());if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++){const n=se(e[r]);Array.isArray(n)?t.push.apply(t,n):t.push(n)}return t}return e}function Re(e,t){return function(n){let s;return Ce(()=>s=j(()=>(h.context={...h.context,[e]:n.value},Ne(()=>n.children))),void 0),s}}const ue=Symbol("fallback");function G(e){for(let t=0;t<e.length;t++)e[t]()}function Ue(e,t,r={}){let n=[],s=[],l=[],u=0,i=t.length>1?[]:null;return ie(()=>G(l)),()=>{let o=e()||[],d=o.length,c,f;return o[pe],j(()=>{let p,x,m,F,P,v,S,E,C;if(d===0)u!==0&&(G(l),l=[],n=[],s=[],u=0,i&&(i=[])),r.fallback&&(n=[ue],s[0]=R(Z=>(l[0]=Z,r.fallback())),u=1);else if(u===0){for(s=new Array(d),f=0;f<d;f++)n[f]=o[f],s[f]=R(y);u=d}else{for(m=new Array(d),F=new Array(d),i&&(P=new Array(d)),v=0,S=Math.min(u,d);v<S&&n[v]===o[v];v++);for(S=u-1,E=d-1;S>=v&&E>=v&&n[S]===o[E];S--,E--)m[E]=s[S],F[E]=l[S],i&&(P[E]=i[S]);for(p=new Map,x=new Array(E+1),f=E;f>=v;f--)C=o[f],c=p.get(C),x[f]=c===void 0?-1:c,p.set(C,f);for(c=v;c<=S;c++)C=n[c],f=p.get(C),f!==void 0&&f!==-1?(m[f]=s[c],F[f]=l[c],i&&(P[f]=i[c]),f=x[f],p.set(C,f)):l[c]();for(f=v;f<d;f++)f in m?(s[f]=m[f],l[f]=F[f],i&&(i[f]=P[f],i[f](f))):s[f]=R(y);s=s.slice(0,u=d),n=o.slice(0)}return s});function y(p){if(l[f]=p,i){const[x,m]=L(f);return i[f]=m,t(o[f],x)}return t(o[f])}}}function Ve(e,t,r={}){let n=[],s=[],l=[],u=[],i=0,o;return ie(()=>G(l)),()=>{const d=e()||[],c=d.length;return d[pe],j(()=>{if(c===0)return i!==0&&(G(l),l=[],n=[],s=[],i=0,u=[]),r.fallback&&(n=[ue],s[0]=R(y=>(l[0]=y,r.fallback())),i=1),s;for(n[0]===ue&&(l[0](),l=[],n=[],s=[],i=0),o=0;o<c;o++)o<n.length&&n[o]!==d[o]?u[o](()=>d[o]):o>=n.length&&(s[o]=R(f));for(;o<n.length;o++)l[o]();return i=u.length=l.length=c,n=d.slice(0),s=s.slice(0,i)});function f(y){l[o]=y;const[p,x]=L(d[o]);return u[o]=x,t(p,o)}}}function Me(e,t){return j(()=>e(t||{}))}function K(){return!0}const le={get(e,t,r){return t===W?r:e.get(t)},has(e,t){return t===W?!0:e.has(t)},set:K,deleteProperty:K,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:K,deleteProperty:K}},ownKeys(e){return e.keys()}};function re(e){return(e=typeof e=="function"?e():e)?e:{}}function _e(){for(let e=0,t=this.length;e<t;++e){const r=this[e]();if(r!==void 0)return r}}function Be(...e){let t=!1;for(let u=0;u<e.length;u++){const i=e[u];t=t||!!i&&W in i,e[u]=typeof i=="function"?(t=!0,A(i)):i}if(ge&&t)return new Proxy({get(u){for(let i=e.length-1;i>=0;i--){const o=re(e[i])[u];if(o!==void 0)return o}},has(u){for(let i=e.length-1;i>=0;i--)if(u in re(e[i]))return!0;return!1},keys(){const u=[];for(let i=0;i<e.length;i++)u.push(...Object.keys(re(e[i])));return[...new Set(u)]}},le);const r={},n=Object.create(null);for(let u=e.length-1;u>=0;u--){const i=e[u];if(!i)continue;const o=Object.getOwnPropertyNames(i);for(let d=o.length-1;d>=0;d--){const c=o[d];if(c==="__proto__"||c==="constructor")continue;const f=Object.getOwnPropertyDescriptor(i,c);if(!n[c])n[c]=f.get?{enumerable:!0,configurable:!0,get:_e.bind(r[c]=[f.get.bind(i)])}:f.value!==void 0?f:void 0;else{const y=r[c];y&&(f.get?y.push(f.get.bind(i)):f.value!==void 0&&y.push(()=>f.value))}}}const s={},l=Object.keys(n);for(let u=l.length-1;u>=0;u--){const i=l[u],o=n[i];o&&o.get?Object.defineProperty(s,i,o):s[i]=o?o.value:void 0}return s}function Ge(e,...t){const r=t.length;if(ge&&W in e){const s=r>1?t.flat():t[0],l=t.map(u=>new Proxy({get(i){return u.includes(i)?e[i]:void 0},has(i){return u.includes(i)&&i in e},keys(){return u.filter(i=>i in e)}},le));return l.push(new Proxy({get(u){return s.includes(u)?void 0:e[u]},has(u){return s.includes(u)?!1:u in e},keys(){return Object.keys(e).filter(u=>!s.includes(u))}},le)),l}const n=[];for(let s=0;s<=r;s++)n[s]={};for(const s of Object.getOwnPropertyNames(e)){let l=r;for(let o=0;o<t.length;o++)if(t[o].includes(s)){l=o;break}const u=Object.getOwnPropertyDescriptor(e,s);!u.get&&!u.set&&u.enumerable&&u.writable&&u.configurable?n[l][s]=u.value:Object.defineProperty(n[l],s,u)}return n}function Qe(e){let t,r;const n=s=>{const l=a.context;if(l){const[i,o]=L();a.count||(a.count=0),a.count++,(r||(r=e())).then(d=>{!a.done&&D(l),a.count--,o(()=>d.default),D()}),t=i}else if(!t){const[i]=Ee(()=>(r||(r=e())).then(o=>o.default));t=i}let u;return A(()=>(u=t())?j(()=>{if(!l||a.done)return u(s);const i=a.context;D(l);const o=u(s);return D(i),o}):"")};return n.preload=()=>r||((r=e()).then(s=>t=()=>s.default),r),n}const Ke=e=>`Stale read from <${e}>.`;function Je(e){const t="fallback"in e&&{fallback:()=>e.fallback};return A(Ue(()=>e.each,e.children,t||void 0))}function Ze(e){const t="fallback"in e&&{fallback:()=>e.fallback};return A(Ve(()=>e.each,e.children,t||void 0))}function et(e){const t=e.keyed,r=A(()=>e.when,void 0,void 0),n=t?r:A(r,void 0,{equals:(s,l)=>!s==!l});return A(()=>{const s=n();if(s){const l=e.children;return typeof l=="function"&&l.length>0?j(()=>l(t?s:()=>{if(!j(n))throw Ke("Show");return r()})):l}return e.fallback},void 0,void 0)}const He=ye();function tt(e){let t=0,r,n,s,l,u;const[i,o]=L(!1),d=Le(),c={increment:()=>{++t===1&&o(!0)},decrement:()=>{--t===0&&o(!1)},inFallback:i,effects:[],resolved:!1},f=je();if(a.context&&a.load){const x=a.getContextId();let m=a.load(x);if(m&&(typeof m!="object"||m.s!==1?s=m:a.gather(x)),s&&s!=="$$f"){const[F,P]=L(void 0,{equals:!1});l=F,s.then(()=>{if(a.done)return P();a.gather(x),D(n),P(),D()},v=>{u=v,P()})}}const y=oe(He);y&&(r=y.register(c.inFallback));let p;return ie(()=>p&&p()),Me(d.Provider,{value:c,get children(){return A(()=>{if(u)throw u;if(n=a.context,l)return l(),l=void 0;n&&s==="$$f"&&D();const x=A(()=>e.children);return A(m=>{const F=c.inFallback(),{showContent:P=!0,showFallback:v=!0}=r?r():{};if((!F||s&&s!=="$$f")&&P)return c.resolved=!0,p&&p(),p=n=s=void 0,Fe(c.effects),x();if(v)return p?m:R(S=>(p=S,n&&(D({id:n.id+"F",count:0}),n=void 0),e.fallback),f)})})}})}export{W as $,Je as F,Ze as I,et as S,Ce as a,A as b,R as c,Ae as d,L as e,Ge as f,je as g,Me as h,qe as i,pe as j,Xe as k,We as l,Be as m,Qe as n,ie as o,tt as p,Ie as r,a as s,j as u};
